<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../../plantillas/plantillaprincipal.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">>

    <ui:define name="titulo">
        Gestion De Batallones - SICOVI
    </ui:define>
    <!-- Prueba commit en sesion david-->
    <ui:define name="abajo">
        <p:messages id="messagesnuevo" showDetail="true" autoUpdate="true" closable="true"  />    
    </ui:define>

    <ui:define name="izquierda">
        izquierda
    </ui:define>

    <ui:define name="derecha">
        derecha
    </ui:define>

    <ui:define name="cuerpo">
        <h:form>
            <p:fieldset legend="Opciones" toggleable="true" toggleSpeed="500" style="width: 100%">         
                <h:panelGrid columns="2" cellpadding="6">  
                    <p:commandButton value="Nuevo Batallon" title="Crear un nuevo batallon" image="icon-add" update=":frmagregarbatallon:dlgNuevo"
                                     actionListener="#{agregarBatallonesBean.cargarGuardadoBatallon()}" />                                                       
                    <p:commandButton value="Buscar Batallon" title="uscar Batallon" image="ui-icon-search" 
                                     actionListener="#{buscarBatallonesBean.cargarBuscador()}" />                                                       
                </h:panelGrid>  
            </p:fieldset>  
        </h:form>




        <h:form id="frmbatallones">

            <p:dataTable id="tblbatallones" var="batallones"
                         value="#{editarBatallonesBean.batallones}"
                         emptyMessage="No hay Batallones disponibles"
                         paginator="true" rows="10" paginatorPosition="bottom"
                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} 
                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         sortMode="multiple" editable="true"
                         style="width: 100%">        
                
                
                <f:facet name="header">  
                    Lista de Batallones 
                </f:facet>
                <p:ajax event="rowEdit" listener="#{editarBatallonesBean.editarBatallon(batallones)}" update="tblbatallones" />
                
                <p:columnGroup type="header">
                    <p:row>
                        <p:column colspan="1" headerText="Datos Batallón" />
                        <p:column colspan="4" headerText="Datos De Contacto" />
                        <p:column colspan="3" headerText="Ubicación" />
                        <p:column colspan="2" headerText="Entes De Control" />
                        <p:column colspan="2" headerText="Acciones" />
                    </p:row>
                    <p:row>                  
                        <p:column  headerText="Nombre" sortBy="#{batallones.nombreBatallon}"/>  
                        <p:column  headerText="Dirección" sortBy="#{batallones.direccion}"/>  
                        <p:column  headerText="Barrio"  sortBy="#{batallones.barrio}"/>  
                        <p:column  headerText="Telefono 1"  sortBy="#{batallones.telefono1}"/>  
                        <p:column  headerText="Telefono 2" sortBy="#{batallones.telefono2}"/>  
                        <p:column  headerText="País" sortBy="#{batallones.ciudad.departamento.pais.nombrePais}"/>  
                        <p:column  headerText="Departamento" sortBy="#{batallones.ciudad.departamento.nombreDepartamento}"/>  
                        <p:column  headerText="Ciudad" sortBy="#{batallones.ciudad.nombreCiudad}"/>  
                        <p:column  headerText="División" sortBy="#{batallones.divisiones.nombreDivision}"/>  
                        <p:column  headerText="Coronel a Cargo" sortBy="#{batallones.persona.pnombre}"/>
                        <p:column  headerText="Editar"/>
                        <p:column  headerText="Eliminar"/>  
                    </p:row>            
                </p:columnGroup>
                
               
                
                <p:column> 
                    <p:cellEditor>  
                        <f:facet name="output">  
                            <h:outputText value="#{batallones.nombreBatallon}" />
                        </f:facet>  
                        <f:facet name="input">  
                            <p:inputText value="#{batallones.nombreBatallon}" style="width:100%"/>  
                        </f:facet>  
                    </p:cellEditor> 
                </p:column>
                
                <p:column>                      
                    <p:cellEditor>  
                        <f:facet name="output">  
                            <h:outputText value="#{batallones.direccion}" /> 
                        </f:facet>  
                        <f:facet name="input">  
                            <p:inputText value="#{batallones.direccion}" style="width:100%"/>  
                        </f:facet>  
                    </p:cellEditor> 
                </p:column>
                
                <p:column>                
                    <p:cellEditor>  
                        <f:facet name="output">  
                            <h:outputText value="#{batallones.barrio}" />  
                        </f:facet>  
                        <f:facet name="input">  
                            <p:inputText value="#{batallones.barrio}" style="width:100%"/>  
                        </f:facet>  
                    </p:cellEditor> 
                </p:column>
                
                <p:column>                                       
                    <p:cellEditor>  
                        <f:facet name="output">  
                            <h:outputText value="#{batallones.telefono1}" />  
                        </f:facet>  
                        <f:facet name="input">  
                            <p:inputText value="#{batallones.telefono1}" style="width:100%"/>  
                        </f:facet>  
                    </p:cellEditor> 
                </p:column>
                
                <p:column>                 
                    <p:cellEditor>  
                        <f:facet name="output">  
                            <h:outputText value="#{batallones.telefono2}" />  
                        </f:facet>  
                        <f:facet name="input">  
                            <p:inputText value="#{batallones.telefono2}" style="width:100%"/>  
                        </f:facet>  
                    </p:cellEditor> 
                </p:column>
                
                <p:column>                 
                    <p:cellEditor>  
                        <f:facet name="output">  
                            <h:outputText value="#{batallones.ciudad.departamento.pais.nombrePais}" />  
                        </f:facet>  
                        <f:facet name="input">  
                            <p:inputText value="#{batallones.ciudad.departamento.pais.nombrePais}" style="width:100%"/>  
                        </f:facet>  
                    </p:cellEditor>
                </p:column>
                
                <p:column>                   
                    <p:cellEditor>  
                        <f:facet name="output">  
                            <h:outputText value="#{batallones.ciudad.departamento.nombreDepartamento}" />  
                        </f:facet>  
                        <f:facet name="input">  
                            <p:inputText value="#{batallones.ciudad.departamento.nombreDepartamento}" style="width:100%"/>  
                        </f:facet>  
                    </p:cellEditor>
                </p:column>
                
                <p:column>                  
                    <p:cellEditor>  
                        <f:facet name="output">  
                            <h:outputText value="#{batallones.ciudad.nombreCiudad}" />  
                        </f:facet>  
                        <f:facet name="input">  
                            <p:inputText value="#{batallones.ciudad.nombreCiudad}" style="width:100%"/>  
                        </f:facet>  
                    </p:cellEditor>
                </p:column>
                
                <p:column>                  
                    <p:cellEditor>  
                        <f:facet name="output">  
                            <h:outputText value="#{batallones.divisiones.nombreDivision}" />  
                        </f:facet>  
                        <f:facet name="input">  
                            <p:inputText value="#{batallones.divisiones.nombreDivision}" style="width:100%"/>  
                        </f:facet>  
                    </p:cellEditor>
                </p:column>
                
                <p:column>                  
                    <p:cellEditor>  
                        <f:facet name="output">  
                            <h:outputText value="#{batallones.divisiones.nombreDivision}" />  
                        </f:facet>  
                        <f:facet name="input">  
                            <p:inputText value="#{batallones.divisiones.nombreDivision}" style="width:100%"/>  
                        </f:facet>  
                    </p:cellEditor>
                </p:column>         

                <p:column style="width:4%">  
                    <p:rowEditor />  
                </p:column> 
                
                <p:column>  
                    <p:commandButton actionListener="#{editarBatallonesBean.cargarEliminarBatallon(batallones)}"   
                                     title="&nbsp;Eliminar" image="icon-delete" update=":dialog:dlg1" />
                         
                    
                </p:column>
                
           


                <f:facet name="footer">  
                    En total hay #{editarBatallonesBean.totalBatallones()}  batallones.  
                </f:facet>
            </p:dataTable> 


        </h:form>

        <h:form id="frmagregarbatallon">            
            <ui:include src="frmagregarbatallon.xhtml" />        
        </h:form>

    </ui:define>

</ui:composition>
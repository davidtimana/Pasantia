<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../../plantillas/plantillaprincipal.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">>

    <ui:define name="titulo">
        Gestion De Batallones - SICOVI
    </ui:define>
<!-- Prueba commit en sesion david-->
    <ui:define name="abajo">
        <p:messages id="messagesnuevo" showDetail="true" autoUpdate="true" closable="true"  />    
    </ui:define>

    <ui:define name="izquierda">
        izquierda
    </ui:define>

    <ui:define name="derecha">
        derecha
    </ui:define>

    <ui:define name="cuerpo">
        <h:form>                    
            <p:fieldset legend="Opciones" toggleable="true" toggleSpeed="500">         
                <h:panelGrid columns="2" cellpadding="6">  
                    <p:commandButton value="Nuevo Batallon" title="Crear un nuevo batallon" image="icon-add" update=":frmagregarbatallon:dlgNuevo"
                                     actionListener="#{agregarBatallonesBean.cargarGuardadoBatallon()}" />                                                       
                </h:panelGrid>  
            </p:fieldset>  
        </h:form>
             



        <h:form id="frmbatallones">
            
            <p:dataTable id="datatable" var="batallones"
                     value="#{editarBatallonesBean.batallones}"
                     emptyMessage="No hay Batallones disponibles"
                     paginator="true" rows="10" paginatorPosition="bottom"
                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} 
                     {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                     resizableColumns="true" sortMode="multiple"
                     filteredValue="#{editarBatallonesBean.batallonesEncontrados}"
                     draggableColumns="true"
                     >        
            <p:ajax event="filter" listener="#{editarBatallonesBean.prueba()}"/>
            <f:facet name="header">  
                Lista de Batallones 
            </f:facet>
            
             <p:columnGroup type="header">
                 <p:row>
                     <p:column colspan="1" headerText="Datos Batallón" />
                     <p:column colspan="4" headerText="Datos De Contacto" />
                     <p:column colspan="3" headerText="Ubicación" />
                     <p:column colspan="2" headerText="Entes De Control" />
                 </p:row>
            <p:row>                  
                <p:column  headerText="Nombre" filterBy="#{batallones.nombreBatallon}" style="width: 100%"/>  
                <p:column  headerText="Dirección" sortBy="#{batallones.direccion}"/>  
                <p:column  headerText="Barrio"  sortBy="#{batallones.barrio}"/>  
                <p:column  headerText="Telefono 1"  sortBy="#{batallones.telefono1}"/>  
                <p:column  headerText="Telefono 2" sortBy="#{batallones.telefono2}"/>  
                <p:column  headerText="País" sortBy="#{batallones.ciudad.departamento.pais.nombrePais}"/>  
                <p:column  headerText="Departamento" sortBy="#{batallones.ciudad.departamento.nombreDepartamento}"/>  
                <p:column  headerText="Ciudad" sortBy="#{batallones.ciudad.nombreCiudad}"/>  
                <p:column  headerText="División" sortBy="#{batallones.divisiones.nombreDivision}"/>  
                <p:column  headerText="Coronel a Cargo" sortBy="#{batallones.persona.pnombre}"/>  
            </p:row>            
        </p:columnGroup>

            <p:column style="width: 100%">                   
                <h:outputText value="#{batallones.nombreBatallon}" />  
            </p:column>

            <p:column>                   
                <h:outputText value="#{batallones.direccion}" />  
            </p:column>

            <p:column>                   
                <h:outputText value="#{batallones.barrio}" />  
            </p:column>

            <p:column>                   
                <h:outputText value="#{batallones.telefono1}" />  
            </p:column>

            <p:column>                   
                <h:outputText value="#{batallones.telefono2}" />  
            </p:column>

            <p:column>                   
                <h:outputText value="#{batallones.ciudad.departamento.pais.nombrePais}" />  
            </p:column>

            <p:column>                   
                <h:outputText value="#{batallones.ciudad.departamento.nombreDepartamento}" />  
            </p:column>

            <p:column>                   
                <h:outputText value="#{batallones.ciudad.nombreCiudad}" />  
            </p:column>

            <p:column>                   
                <h:outputText value="#{batallones.divisiones.nombreDivision}" />  
            </p:column>

            <p:column>                   
                <h:outputText value="#{batallones.persona.pnombre} #{batallones.persona.papellido}" />  
            </p:column>

            
            
            <f:facet name="footer">  
                En total hay #{editarBatallonesBean.totalBatallones()}  batallones.  
            </f:facet>
        </p:dataTable> 


        </h:form>

        <h:form id="frmagregarbatallon">            
            <ui:include src="frmagregarbatallon.xhtml" />        
        </h:form>

    </ui:define>

</ui:composition>